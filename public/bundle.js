(()=>{const e=document.querySelector("#city-input"),r=document.querySelector("#search"),t=document.querySelector("#city"),n=document.querySelector("#temperature span"),o=document.querySelector("#description"),c=document.querySelector("#weather-icon"),a=(document.querySelector("#country"),document.querySelector("#humidity span")),i=document.querySelector("#wind span"),s=document.querySelector("#weather-data"),d=async e=>{try{const r=await(async e=>{try{const r=await fetch("__API_URL__",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:e})});return await r.json()}catch(e){throw console.error(e),e}})(e);return r.error?(console.error("Error fetching weather data:",r.error),{error:r.error}):(t.innerText=r.name,n.innerHTML=parseInt(r.main.temp),o.innerHTML=r.weather[0].description,c.setAttribute("src",`https://openweathermap.org/img/wn/${r.weather[0].icon}.png`),a.innerHTML=`${r.main.humidity}%`,i.innerHTML=`${r.wind.speed}km/h`,s.classList.remove("hide"),{name:r.name,temp:parseInt(r.main.temp),description:r.weather[0].description,icon:r.weather[0].icon,humidity:`${r.main.humidity}%`,windSpeed:`${r.wind.speed}km/h`,imageUrl:r.imageUrl})}catch(e){return console.error(e),{error:"Internal Server Error"}}};r.addEventListener("click",(async r=>{r.preventDefault();const t=e.value;try{const e=await d(t);e.error||async function(e){try{document.body.style.backgroundImage=`url('${e}')`}catch(e){console.log("Error:",e)}}(e.imageUrl)}catch(e){console.error(e)}})),e.addEventListener("keyup",(async e=>{if("Enter"===e.code){const r=e.target.value;try{await d(r)}catch(e){console.error(e)}}}))})();